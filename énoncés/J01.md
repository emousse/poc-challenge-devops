# Dockerisation front et bdd

Bienvenue dans ce premier challenge de la saison DevOps ! L'objectif est de mettre en pratique les concepts de Docker et Docker Compose que nous avons vus aujourd'hui.

## üéØ Objectifs p√©dagogiques

*   **Se rappeler** des concepts de Docker Compose pour orchestrer plusieurs services.
*   **Appliquer** les commandes Docker pour construire et g√©rer des conteneurs.
*   **Cr√©er** un `Dockerfile` pour une application frontend.
*   **Configurer** un service de base de donn√©es PostgreSQL avec initialisation et persistance des donn√©es.
*   **Utiliser** Adminer pour inspecter la base de donn√©es.

## üöÄ Votre mission

Votre mission est de cr√©er un environnement de d√©veloppement complet et conteneuris√© en utilisant Docker Compose. Cet environnement devra orchestrer les services suivants :

1.  **Service Frontend (`frontend`) :**
    *   Cr√©ez un `Dockerfile` pour votre application frontend.
        *   Utilisez une image de base Node.js l√©g√®re (ex: `node:XX-alpine`).
        *   Ce `Dockerfile` doit copier le code source, installer les d√©pendances (`npm install`) et d√©marrer l'application (ex: `npm run dev`).
    *   Dans votre `docker-compose.yml`, d√©finissez ce service. Il devra √™tre accessible, par exemple, sur le port `3000` de votre machine h√¥te.

2.  **Service Base de Donn√©es (`db`) :**
    *   Utilisez l'image `postgres:15-alpine` pour b√©n√©ficier d'une base de donn√©es PostgreSQL l√©g√®re.
    *   Configurez les variables d'environnement n√©cessaires pour PostgreSQL (`POSTGRES_USER`, `POSTGRES_PASSWORD`, `POSTGRES_DB`).
    *   Montez le fichier `dump.sql` dans le r√©pertoire `/docker-entrypoint-initdb.d/` du conteneur pour que la base de donn√©es soit initialis√©e au premier d√©marrage avec la table `items` et ses donn√©es.
    *   Assurez la persistance des donn√©es de la base de donn√©es PostgreSQL en utilisant un volume nomm√© Docker.

3.  **Service Adminer (`adminer`) :**
    *   Utilisez l'image officielle `adminer`.
    *   Configurez ce service pour qu'il soit accessible, par exemple, sur le port `8080` de votre machine h√¥te.
    *   Adminer doit pouvoir se connecter au service `db` pour vous permettre de v√©rifier que la table `items` a bien √©t√© cr√©√©e et que les donn√©es initiales sont pr√©sentes.

## ‚öôÔ∏è Fichier `docker-compose.yml`

Vous devrez cr√©er un fichier `docker-compose.yml` √† la racine de votre projet qui d√©finit et configure ces trois services.

N'oubliez pas de :
*   D√©finir les d√©pendances entre services si n√©cessaire (`depends_on`).
*   G√©rer correctement le mapping des ports.
*   Utiliser des volumes nomm√©s pour la persistance des donn√©es de la base de donn√©es.

## ‚úÖ Checklist

- [ ] Un `Dockerfile` fonctionnel pour le service frontend
- [ ] Un fichier `docker-compose.yml` qui orchestre les trois services
- [ ] L'application frontend est accessible dans votre navigateur via le port sp√©cifi√©
- [ ] La base de donn√©es PostgreSQL:
  - [ ] D√©marre correctement
  - [ ] S'initialise avec `dump.sql`
  - [ ] Les donn√©es persistent apr√®s `docker compose down && docker compose up -d`
- [ ] Adminer:
  - [ ] Est accessible
  - [ ] Permet la connexion √† la base `db`
  - [ ] Affiche la table `items` et son contenu
- [ ] Tous les services d√©marrent sans erreur avec `docker compose up -d`
- [ ] Les logs des conteneurs ne montrent pas d'erreurs critiques

## üí° Conseils

*   Commencez par cr√©er le `Dockerfile` du frontend et testez-le isol√©ment avec `docker build` et `docker run`.
*   Ensuite, construisez votre `docker-compose.yml` service par service.
*   Consultez la documentation des images Docker Hub pour `postgres` et `adminer` pour conna√Ætre les variables d'environnement et les options de configuration.
*   Utilisez des noms de service simples et coh√©rents dans votre `docker-compose.yml` (ex: `frontend`, `db`, `adminer`). Ces noms de service servent de noms d'h√¥te sur le r√©seau interne cr√©√© par Docker Compose.
*   Assurez-vous que le serveur de d√©veloppement du frontend est accessible depuis l'ext√©rieur du conteneur (pensez √† l'option `--host` pour Vite ou des configurations similaires).

Bonne chance !